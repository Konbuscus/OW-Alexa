'use strict';
let chai = require('chai');
let chaiAsPromised = require('chai-as-promised');
let expect = chai.expect;

let WebhookTester = require('../../lib/tools/webhookTest').WebhookTest;

chai.use(chaiAsPromised);
chai.should();
let test = new WebhookTester();

describe('Calorie Counter Test', function() {
    it.skip('HelloWorld Test', function() {
        return test.testIntent('HelloWorld').then((response) => {
           expect(response.isTell('Hello')).to.equal(true);
        });
    });


    it.skip('Dialog Test', function() {
    //     test.testDialog('CalorieCounter')
    //         .addStep({mealType: 'Bolognese', time: '2:00'}, function() {
    //
    //         })
    //         .addStep({calorieCount: 1000}, function() {
    //
    //         })
    //         .run();
    //
    //
    //     let calorieCounterIntent = (new RequestBuilderAlexaSkill)
    //         .intentRequest('CalorieCounterIntent')
    //         .setDialogState('STARTED')
    //         .buildSimple();
    //
    //     let promise = test.testIntent(calorieCounterIntent);
    //
    //     promise = promise.then((response) => {
    //         expect(response.isDialog('Dialog.Delegate')).to.equal(true);
    //
    //         let calorieCounterIntent = (new RequestBuilderAlexaSkill)
    //             .intentRequest('CalorieCounterIntent')
    //             .setDialogState('IN_PROGRESS')
    //             .addSlot('mealType', 'Bolognese')
    //             .addSlot('calorieCount', '1000')
    //             .buildSimple();
    //         return test.testIntent(calorieCounterIntent);
    //     });
    //
    //     promise = promise.then((response) => {
    //         expect(response.isDialog('Dialog.Delegate')).to.equal(true);
    //         let calorieCounterIntent = (new RequestBuilderAlexaSkill)
    //             .intentRequest('CalorieCounterIntent')
    //             .setDialogState('COMPLETED')
    //             .addSlot('mealType', 'Bolognese')
    //             .addSlot('calorieCount', '1000')
    //             .addSlot('time', '2:00')
    //             .buildSimple();
    //         return test.testIntent(calorieCounterIntent);
    //     });
    //
    //     promise = promise.then((response) => {
    //         expect(response.isTell('Alles klar!')).to.equal(true);
    //         return test.end();
    //     });
    //
    //     return promise;
    });
});
